{"version":3,"sources":["reducers/authReducer.js","reducers/index.js","reducers/streamReducer.js","apis/streams.js","history.js","actions/index.js","components/streams/StreamList.js","components/streams/StreamForm.js","components/streams/StreamEdit.js","components/streams/StreamCreate.js","components/streams/StreamShow.js","components/Modal.js","components/streams/StreamDelete.js","components/GoogleAuth.js","components/Header.js","components/App.js","index.js"],"names":["INITIAL_STATE","isSignedIn","userId","combineReducers","auth","state","action","type","payload","form","formReducer","streams","id","_","mapKeys","omit","axios","create","baseURL","createBrowserHistory","fetchStream","dispatch","a","get","response","data","StreamList","this","props","fetchStreams","style","textAlign","to","className","stream","currentUserId","map","key","renderAdmin","title","description","renderList","renderCreateBtn","React","Component","connect","Object","values","StreamForm","renderInput","input","label","meta","touched","error","renderError","onSubmit","formValues","handleSubmit","Field","name","component","reduxForm","validate","errors","StreamEdit","formvalues","editStream","match","params","initialValues","pick","ownProps","patch","history","push","StreamCreate","createStream","getState","post","StreamShow","videoRef","createRef","buildPlayer","player","destroy","flv","createPlayer","url","attachMediaElement","current","load","ref","width","controls","Modal","ReactDOM","createPortal","onClick","onDismiss","e","stopPropagation","content","actions","document","querySelector","StreamDelete","Fragment","deleteStream","renderContent","renderActions","delete","GoogleAuth","onAuthChange","signIn","currentUser","getId","signOut","onSignInClick","onSignOutClick","window","gapi","client","init","clientId","scope","then","auth2","getAuthInstance","listen","renderAuthButton","Header","App","path","exact","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","reducers","applyMiddleware","reduxThunk","render"],"mappings":"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","file":"static/js/main.e936238e.chunk.js","sourcesContent":["const INITIAL_STATE = {\r\n    isSignedIn: null,\r\n    userId: null\r\n};\r\n\r\nexport default(state= INITIAL_STATE, action) => {\r\n    switch(action.type){\r\n        case 'SIGN_IN':\r\n            return {...state, isSignedIn: true, userId: action.payload};\r\n        case 'SIGN_OUT':\r\n            return {...state, isSignedIn: false, userId: null};\r\n        default:\r\n            return state;\r\n    }\r\n}","import { combineReducers } from 'redux';\r\nimport { reducer as formReducer } from 'redux-form';\r\nimport authReducer from './authReducer';\r\nimport streamReducer from './streamReducer'\r\n\r\nexport default combineReducers({\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    streams: streamReducer\r\n});","import _ from 'lodash';\r\n\r\nexport default (state={},action) =>{\r\n    switch(action.type) {\r\n        case 'FETCH_STREAM':\r\n            return {...state, [action.payload.id]: action.payload};\r\n        case 'CREATE_STREAM':\r\n            return {...state, [action.payload.id]: action.payload};\r\n        case 'EDIT_STREAM':\r\n            return {...state, [action.payload.id]: action.payload};\r\n        case 'FETCH_STREAMS':\r\n            return {...state, ..._.mapKeys(action.payload,'id')};  \r\n        case 'DELETE_STREAM':\r\n            return  _.omit(state, action.payload);        \r\n        default:\r\n            return state;\r\n    }\r\n};","import axios from 'axios';\r\n\r\nexport default axios.create({\r\n    baseURL: \"http://localhost:3001\"\r\n});","import { createBrowserHistory } from 'history'; \r\nexport default createBrowserHistory();","import streams from '../apis/streams';\r\nimport history from '../history';\r\n\r\nexport const signIn = (userId) =>{\r\n    return {\r\n        type: 'SIGN_IN',\r\n        payload: userId\r\n    };\r\n};\r\n\r\nexport const signOut = () =>{\r\n    return {\r\n        type: 'SIGN_OUT'\r\n    };\r\n};\r\n\r\nexport const createStream = (formvalues) => async (dispatch, getState) => {\r\n    const { userId }=getState().auth;\r\n    const response = await streams.post('/streams', {...formvalues, userId});\r\n\r\n    dispatch({ type: 'CREATE_STREAM', payload: response.data});\r\n\r\n    history.push('/');\r\n};\r\n\r\nexport const fetchStreams = () => async dispatch =>{\r\n    const response = await streams.get('/streams');\r\n\r\n    dispatch({ type: 'FETCH_STREAMS', payload: response.data});\r\n};\r\n\r\nexport const fetchStream = (id) => async dispatch =>{\r\n    const response = await streams.get(`/streams/${id}`);\r\n\r\n    dispatch({ type: 'FETCH_STREAM', payload: response.data});\r\n};\r\n\r\nexport const editStream = (id, formvalues) => async dispatch =>{\r\n    const response = await streams.patch(`/streams/${id}`, formvalues);\r\n\r\n    dispatch({ type: 'EDIT_STREAM', payload: response.data});\r\n    history.push('/');\r\n};\r\n\r\nexport const deleteStream = (id) => async dispatch =>{\r\n    await streams.delete(`/streams/${id}`);\r\n\r\n    dispatch({ type: 'DELETE_STREAM', payload: id});\r\n    history.push('/');\r\n};","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport { fetchStreams } from '../../actions';\r\n\r\nclass StreamList extends React.Component{\r\n\r\n    componentDidMount(){\r\n        this.props.fetchStreams();\r\n    }\r\n\r\n    renderCreateBtn(){\r\n        if(this.props.isSignedIn){\r\n            return(\r\n                <div style={{textAlign: 'right'}}>\r\n                    <Link to=\"/streams/new\" className=\"ui button primary\">\r\n                        Create Stream\r\n                    </Link>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    renderAdmin(stream){\r\n        if(stream.userId===this.props.currentUserId){\r\n            return (\r\n            <div className=\"right floated content\">\r\n                <Link to={`/streams/edit/${stream.id}`} className=\"ui button primary\"> EDIT</Link>\r\n                <Link to={`/streams/delete/${stream.id}`} className=\"ui button negative\"> DELETE</Link>\r\n            </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    renderList(){\r\n        return this.props.streams.map(stream =>{\r\n            return(\r\n                <div className=\"item\" key={stream.id}>\r\n                    {this.renderAdmin(stream)}\r\n                    <i className=\"large middle aligned icon camera\"/>\r\n                    <div className=\"content\">\r\n                        <Link to={`/streams/${stream.id}`} className=\"ui header\">{stream.title}</Link>\r\n                        <div className=\"description\">{stream.description}</div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <h2>STREAMS</h2>\r\n                <div className=\"ui celled list\">\r\n                    {this.renderList()}\r\n                </div>\r\n                {this.renderCreateBtn()}\r\n            </div>\r\n            );\r\n    }\r\n}\r\n\r\nconst mapStateToProps=(state)=>{\r\n    return {\r\n        streams: Object.values(state.streams),\r\n        currentUserId: state.auth.userId,\r\n        isSignedIn: state.auth.isSignedIn\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchStreams })(StreamList);","import React from 'react';\r\nimport { Field,reduxForm } from 'redux-form';\r\n\r\n\r\nclass StreamForm extends React.Component{\r\n    renderError({error, touched}){\r\n        if(error && touched){\r\n            return(\r\n                <div className=\"ui error message\">\r\n                    <div className=\"header\">{error}</div>\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n\r\n    renderInput= ({input, label, meta}) =>{ \r\n        const className=`field ${meta.touched && meta.error ? 'error':''}`;\r\n        return(\r\n            <div className={className}>\r\n                <label>{label}</label>\r\n                <input {...input}/>\r\n                {this.renderError(meta)}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    onSubmit= (formValues) => {\r\n        this.props.onSubmit(formValues);\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <form className=\"ui form error\" onSubmit={this.props.handleSubmit(this.onSubmit)}>\r\n                    <Field name=\"title\" component={this.renderInput} label=\"Enter Title\"></Field>\r\n                    <Field name=\"description\" component={this.renderInput} label=\"Enter Description\"></Field>\r\n                    <button className=\"ui button primary\">Submit</button>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst validate = (formValues) => {\r\n    const errors = {};\r\n\r\n    if(!formValues.title){\r\n        errors.title = 'You must enter a valid title';\r\n    }\r\n    if(!formValues.description){\r\n        errors.description = 'You must enter a valid description';\r\n    }\r\n    return errors;\r\n}\r\n\r\nexport default reduxForm({\r\n    form: 'streamForm',\r\n    validate: validate\r\n})(StreamForm);\r\n\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStream, editStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\nimport _ from 'lodash';\r\n\r\nclass StreamEdit extends React.Component{\r\n\r\n    componentDidMount(){\r\n        this.props.fetchStream(this.props.match.params.id);\r\n    }\r\n\r\n    onSubmit = (formvalues) =>{\r\n       this.props.editStream(this.props.match.params.id,formvalues);\r\n    }\r\n\r\n    render(){\r\n        if(!this.props.stream){\r\n            return(<div>Loading..</div>);\r\n        }\r\n        return(\r\n            <div>\r\n                <h3>EDIT A STREAM</h3>\r\n                <StreamForm initialValues={_.pick(this.props.stream,'title','description')} onSubmit={this.onSubmit}/>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nconst mapStateToProps=(state,ownProps)=>{\r\n    return{\r\n        stream: state.streams[ownProps.match.params.id]\r\n    };\r\n}\r\n\r\nexport default connect(mapStateToProps, {fetchStream, editStream})(StreamEdit);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { createStream } from '../../actions';\r\nimport StreamForm from './StreamForm';\r\nclass StreamCreate extends React.Component{\r\n    \r\n\r\n    onSubmit= (formValues) => {\r\n        this.props.createStream(formValues);\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>\r\n                <h3>CREATE A STREAM</h3>\r\n                <StreamForm onSubmit={this.onSubmit}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default connect(null, { createStream })(StreamCreate);","import React from 'react';\r\nimport flv from 'flv.js';\r\nimport { connect } from 'react-redux';\r\nimport { fetchStream } from '../../actions';\r\n\r\nclass StreamShow extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.videoRef=React.createRef();\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.props.fetchStream(this.props.match.params.id);\r\n        this.buildPlayer();\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        this.buildPlayer();\r\n    }\r\n\r\n    componentWillUnmount(){\r\n        this.player.destroy();\r\n    }\r\n    \r\n    buildPlayer(){\r\n        if(this.player || !this.props.stream){\r\n            return;\r\n        }\r\n        this.player = flv.createPlayer({\r\n            type: 'flv',\r\n            url: `http://localhost:8000/live/${this.props.match.params.id}.flv`\r\n        });\r\n        this.player.attachMediaElement(this.videoRef.current);\r\n        this.player.load();\r\n    }\r\n\r\n    render(){\r\n\r\n        if(!this.props.stream){\r\n            return(<div>Loadinggggg....</div>);\r\n        }\r\n        \r\n        const {title,description}=this.props.stream;\r\n        return(\r\n            <div>\r\n                <video ref={this.videoRef} style={{width:'100%'}} controls/>\r\n                <h1>{title}</h1>\r\n                <h5>{description}</h5>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps=(state,ownProps)=>{\r\n    return({stream:state.streams[ownProps.match.params.id]});\r\n}\r\n\r\nexport default connect(mapStateToProps,{fetchStream})(StreamShow);","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\n\r\nconst Modal = props =>{\r\n    return ReactDOM.createPortal(\r\n        <div onClick={ props.onDismiss} className=\"ui dimmer modals visible active\">\r\n            <div onClick={(e)=> e.stopPropagation()} className=\"ui standard modal visible active\">\r\n               <div className=\"ui header\">{props.title}</div>\r\n               <div className=\"ui content\">{props.content}</div>\r\n               <div className=\"ui actions\">\r\n                 {props.actions}\r\n               </div>\r\n            </div>\r\n        </div>, \r\n        document.querySelector('#modal')\r\n    );\r\n};\r\n\r\nexport default Modal;","import React from 'react';\r\nimport Modal from '../Modal';\r\nimport history from '../../history';\r\nimport { connect } from 'react-redux';\r\nimport { Link } from 'react-router-dom';\r\nimport {fetchStream, deleteStream} from '../../actions';\r\n\r\nclass StreamDelete extends React.Component{\r\n\r\n    componentDidMount(){\r\n        this.props.fetchStream(this.props.match.params.id);\r\n    }\r\n\r\n    renderActions(){\r\n        return(\r\n            <React.Fragment>\r\n            <button onClick={()=>this.props.deleteStream(this.props.match.params.id)} className=\"ui button negative\">Delete</button>\r\n            <Link to=\"/\" className=\"ui button\">Cancel</Link>\r\n        </React.Fragment>\r\n        ); \r\n        \r\n    }\r\n\r\n    renderContent(){\r\n        if(this.props.stream){\r\n            return `Are you sure you want to delete the stream with title ${this.props.stream.title} ?`\r\n        }\r\n        return 'Are you sure you want to delete the stream?'\r\n    }\r\n    \r\n    render(){\r\n        return(\r\n            <div>\r\n                StreamDelete\r\n                <Modal\r\n                title=\"Stream Delete\"\r\n                content={this.renderContent()}\r\n                actions={this.renderActions()}\r\n                onDismiss={()=> history.push('/')}/>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nconst mapStateToProps=(state, ownProps)=>{\r\n    return({stream:state.streams[ownProps.match.params.id]});\r\n}\r\n\r\nexport default connect(mapStateToProps,{fetchStream, deleteStream})(StreamDelete);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { signIn, signOut } from '../actions';\r\n\r\nclass GoogleAuth extends React.Component{\r\n\r\n    componentDidMount(){\r\n        window.gapi.load('client:auth2',()=>{\r\n            window.gapi.client.init({\r\n                clientId:'1017021768260-pq97rr4bh5sdhusuo2psfbvvedij8f1g.apps.googleusercontent.com',\r\n                scope: 'email'\r\n            }).then(()=>{\r\n                this.auth = window.gapi.auth2.getAuthInstance();\r\n                this.onAuthChange(this.auth.isSignedIn.get())\r\n                this.auth.isSignedIn.listen(this.onAuthChange);\r\n            });\r\n        });\r\n    }\r\n\r\n    onAuthChange=(isSignedIn)=>{\r\n        if(isSignedIn){\r\n            this.props.signIn(this.auth.currentUser.get().getId());\r\n        }\r\n        else{\r\n            this.props.signOut();\r\n        }\r\n    }\r\n\r\n    onSignInClick=()=>{\r\n        this.auth.signIn();\r\n    }\r\n\r\n    onSignOutClick=()=>{\r\n        this.auth.signOut();\r\n    }\r\n\r\n    renderAuthButton(){\r\n        if(this.props.isSignedIn === null){\r\n            return null;\r\n        }\r\n        else if(this.props.isSignedIn){\r\n            return(\r\n                <button onClick={this.onSignOutClick} className=\"ui red google button\">\r\n                    <i className=\"google icon\"/>\r\n                    Sign Out\r\n                </button>\r\n            );\r\n        }\r\n        else{\r\n            return(\r\n                <button onClick={this.onSignInClick}  className=\"ui red google button\">\r\n                    <i className=\"google icon\"/>\r\n                    Sign In with Google\r\n                </button>\r\n            );\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div>{this.renderAuthButton()}</div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps=(state)=>{\r\n    return {isSignedIn: state.auth.isSignedIn}\r\n}\r\n\r\nexport default connect(mapStateToProps,{ signIn,signOut })(GoogleAuth);","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport GoogleAuth from './GoogleAuth';\r\n\r\nconst Header =()=>{\r\n    return(\r\n        <div className=\"ui secondary pointing menu\">\r\n            <Link to=\"/\" className=\"item\">TwitchClone</Link>\r\n            <div className=\"right menu\">\r\n                <Link to=\"/\" className=\"item\">All Streams</Link>\r\n                <GoogleAuth/>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\nexport default Header;","import React from 'react';\r\nimport { Router, Route, Switch } from 'react-router-dom';\r\nimport StreamList from './streams/StreamList';\r\nimport StreamEdit from './streams/StreamEdit';\r\nimport StreamCreate from './streams/StreamCreate';\r\nimport StreamShow from './streams/StreamShow';\r\nimport StreamDelete from './streams/StreamDelete';\r\nimport Header from './Header';\r\nimport history from '../history';\r\n\r\nconst App = () =>{\r\n    return(\r\n        <div className=\"ui container\">\r\n            <Router history={history}>\r\n            <div>\r\n                <Header/>\r\n                <Switch>\r\n                <Route path='/' exact component={StreamList}></Route>\r\n                <Route path='/streams/new' exact component={StreamCreate}></Route>\r\n                <Route path='/streams/edit/:id' exact component={StreamEdit}></Route>\r\n                <Route path='/streams/delete/:id' exact component={StreamDelete}></Route>\r\n                <Route path='/streams/:id' exact component={StreamShow}></Route>\r\n                </Switch>\r\n            </div>\r\n            </Router>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware, compose } from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\nimport reducers from './reducers';\r\nimport App from './components/App';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(reduxThunk)));\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <App/>\r\n    </Provider>\r\n    , document.querySelector('#root'));"],"sourceRoot":""}